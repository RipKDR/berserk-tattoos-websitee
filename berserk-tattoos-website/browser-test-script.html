<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser Compatibility Test Script - Berserk Tattoos</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #7B1113;
            margin-bottom: 10px;
        }

        .browser-info {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: monospace;
        }

        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: #fafafa;
            border-left: 4px solid #7B1113;
        }

        .test-item {
            margin: 15px 0;
            padding: 10px;
            background: white;
            border-radius: 4px;
        }

        .pass {
            color: #22c55e;
            font-weight: bold;
        }

        .fail {
            color: #ef4444;
            font-weight: bold;
        }

        .partial {
            color: #f59e0b;
            font-weight: bold;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-test {
            padding: 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 10px 0;
        }

        .demo-grid-item {
            background: #7B1113;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .backdrop-demo {
            background: rgba(17, 17, 17, 0.95);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            color: white;
            padding: 20px;
            margin: 10px 0;
            position: relative;
        }

        .blur-background {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, #7B1113, #111111);
            z-index: -1;
        }

        button {
            background: #7B1113;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 4px;
            margin: 5px;
        }

        button:hover {
            background: #5a0c0e;
        }

        .console-output {
            background: #1a1a1a;
            color: #0f0;
            padding: 15px;
            font-family: monospace;
            border-radius: 4px;
            max-height: 200px;
            overflow-y: auto;
            margin: 10px 0;
        }

        @supports not (display: grid) {
            .demo-grid {
                display: flex;
                flex-wrap: wrap;
            }

            .demo-grid-item {
                flex: 1 1 30%;
                margin: 5px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Browser Compatibility Test Suite</h1>
        <p>Comprehensive browser testing for Berserk Tattoos website</p>

        <!-- Browser Detection -->
        <div class="browser-info" id="browser-info">
            Detecting browser...
        </div>

        <!-- Feature Support Tests -->
        <div class="test-section">
            <h2>CSS Feature Support</h2>
            <div class="feature-grid" id="css-tests"></div>
        </div>

        <!-- JavaScript Feature Tests -->
        <div class="test-section">
            <h2>JavaScript Feature Support</h2>
            <div class="feature-grid" id="js-tests"></div>
        </div>

        <!-- Visual Tests -->
        <div class="test-section">
            <h2>Visual Rendering Tests</h2>

            <div class="test-item">
                <h3>CSS Grid Layout</h3>
                <div class="demo-grid">
                    <div class="demo-grid-item">Grid 1</div>
                    <div class="demo-grid-item">Grid 2</div>
                    <div class="demo-grid-item">Grid 3</div>
                </div>
                <p id="grid-result"></p>
            </div>

            <div class="test-item">
                <h3>Backdrop Filter</h3>
                <div style="position: relative;">
                    <div class="blur-background"></div>
                    <div class="backdrop-demo">
                        This should have a blurred background
                    </div>
                </div>
                <p id="backdrop-result"></p>
            </div>
        </div>

        <!-- Interactive Tests -->
        <div class="test-section">
            <h2>Interactive Feature Tests</h2>

            <div class="test-item">
                <h3>Smooth Scroll Test</h3>
                <button onclick="testSmoothScroll()">Test Smooth Scroll</button>
                <p id="scroll-result"></p>
            </div>

            <div class="test-item">
                <h3>Form Validation Test</h3>
                <form id="test-form">
                    <input type="email" placeholder="Email" required>
                    <input type="tel" placeholder="Phone" pattern="[0-9]{10}" required>
                    <button type="submit">Test Submit</button>
                </form>
                <p id="form-result"></p>
            </div>
        </div>

        <!-- Console Output -->
        <div class="test-section">
            <h2>Test Console</h2>
            <div class="console-output" id="console-output"></div>
        </div>

        <!-- Export Results -->
        <div class="test-section">
            <h2>Export Test Results</h2>
            <button onclick="exportResults()">Export Full Report</button>
            <button onclick="copyToClipboard()">Copy Summary</button>
        </div>
    </div>

    <script>
        // Browser Detection
        function detectBrowser() {
            const ua = navigator.userAgent;
            let browserName = 'Unknown';
            let browserVersion = '';

            if (ua.indexOf('Chrome') > -1 && ua.indexOf('Edg') === -1) {
                browserName = 'Chrome';
                browserVersion = ua.match(/Chrome\/(\d+)/)[1];
            } else if (ua.indexOf('Safari') > -1 && ua.indexOf('Chrome') === -1) {
                browserName = 'Safari';
                browserVersion = ua.match(/Version\/(\d+)/)[1];
            } else if (ua.indexOf('Firefox') > -1) {
                browserName = 'Firefox';
                browserVersion = ua.match(/Firefox\/(\d+)/)[1];
            } else if (ua.indexOf('Edg') > -1) {
                browserName = 'Edge';
                browserVersion = ua.match(/Edg\/(\d+)/)[1];
            } else if (ua.indexOf('Trident') > -1) {
                browserName = 'Internet Explorer';
                browserVersion = '11';
            }

            const platform = navigator.platform;
            const mobile = /Mobile|Android|iPhone|iPad/.test(ua);

            return {
                name: browserName,
                version: browserVersion,
                platform: platform,
                mobile: mobile,
                userAgent: ua
            };
        }

        // Log to console output
        function log(message, type = 'info') {
            const console = document.getElementById('console-output');
            const timestamp = new Date().toLocaleTimeString();
            const color = type === 'pass' ? '#0f0' : type === 'fail' ? '#f00' : '#fff';
            console.innerHTML += `<div style="color: ${color}">[${timestamp}] ${message}</div>`;
            console.scrollTop = console.scrollHeight;
        }

        // CSS Feature Tests
        const cssTests = [
            {
                name: 'CSS Grid',
                test: () => CSS.supports('display', 'grid'),
                critical: true
            },
            {
                name: 'CSS Variables',
                test: () => CSS.supports('--test', 'value'),
                critical: true
            },
            {
                name: 'Backdrop Filter',
                test: () => CSS.supports('backdrop-filter', 'blur(10px)') ||
                    CSS.supports('-webkit-backdrop-filter', 'blur(10px)'),
                critical: false
            },
            {
                name: 'Clamp()',
                test: () => CSS.supports('font-size', 'clamp(1rem, 2vw, 3rem)'),
                critical: false
            },
            {
                name: 'Smooth Scroll',
                test: () => 'scrollBehavior' in document.documentElement.style,
                critical: false
            },
            {
                name: 'Focus Visible',
                test: () => CSS.supports(':focus-visible'),
                critical: false
            },
            {
                name: 'Object Fit',
                test: () => CSS.supports('object-fit', 'cover'),
                critical: true
            },
            {
                name: 'Flexbox',
                test: () => CSS.supports('display', 'flex'),
                critical: true
            }
        ];

        // JavaScript Feature Tests
        const jsTests = [
            {
                name: 'IntersectionObserver',
                test: () => 'IntersectionObserver' in window,
                critical: false
            },
            {
                name: 'Promise',
                test: () => 'Promise' in window,
                critical: true
            },
            {
                name: 'Array.from',
                test: () => 'from' in Array,
                critical: true
            },
            {
                name: 'forEach (NodeList)',
                test: () => 'forEach' in NodeList.prototype,
                critical: true
            },
            {
                name: 'URLSearchParams',
                test: () => 'URLSearchParams' in window,
                critical: false
            },
            {
                name: 'localStorage',
                test: () => {
                    try {
                        localStorage.setItem('test', 'test');
                        localStorage.removeItem('test');
                        return true;
                    } catch (e) {
                        return false;
                    }
                },
                critical: false
            },
            {
                name: 'FormData',
                test: () => 'FormData' in window,
                critical: true
            },
            {
                name: 'History API',
                test: () => 'pushState' in history,
                critical: false
            }
        ];

        // Run CSS Tests
        function runCSSTests() {
            const container = document.getElementById('css-tests');
            container.innerHTML = '';

            cssTests.forEach(test => {
                const result = test.test();
                const div = document.createElement('div');
                div.className = 'feature-test';
                div.innerHTML = `
                    <h4>${test.name}</h4>
                    <p class="${result ? 'pass' : test.critical ? 'fail' : 'partial'}">
                        ${result ? '✅ SUPPORTED' : test.critical ? '❌ NOT SUPPORTED' : '⚠️ NOT SUPPORTED (Fallback exists)'}
                    </p>
                `;
                container.appendChild(div);

                log(`CSS ${test.name}: ${result ? 'PASS' : 'FAIL'}`, result ? 'pass' : 'fail');
            });
        }

        // Run JavaScript Tests
        function runJSTests() {
            const container = document.getElementById('js-tests');
            container.innerHTML = '';

            jsTests.forEach(test => {
                const result = test.test();
                const div = document.createElement('div');
                div.className = 'feature-test';
                div.innerHTML = `
                    <h4>${test.name}</h4>
                    <p class="${result ? 'pass' : test.critical ? 'fail' : 'partial'}">
                        ${result ? '✅ SUPPORTED' : test.critical ? '❌ NOT SUPPORTED' : '⚠️ NOT SUPPORTED (Fallback exists)'}
                    </p>
                `;
                container.appendChild(div);

                log(`JS ${test.name}: ${result ? 'PASS' : 'FAIL'}`, result ? 'pass' : 'fail');
            });
        }

        // Test Visual Features
        function testVisualFeatures() {
            // Test Grid
            const gridSupported = CSS.supports('display', 'grid');
            document.getElementById('grid-result').innerHTML =
                gridSupported ?
                    '<span class="pass">✅ CSS Grid is working correctly</span>' :
                    '<span class="partial">⚠️ CSS Grid not supported - using Flexbox fallback</span>';

            // Test Backdrop Filter
            const backdropSupported = CSS.supports('backdrop-filter', 'blur(10px)') ||
                CSS.supports('-webkit-backdrop-filter', 'blur(10px)');
            document.getElementById('backdrop-result').innerHTML =
                backdropSupported ?
                    '<span class="pass">✅ Backdrop filter is working correctly</span>' :
                    '<span class="partial">⚠️ Backdrop filter not supported - using solid background</span>';
        }

        // Test Smooth Scroll
        function testSmoothScroll() {
            const supported = 'scrollBehavior' in document.documentElement.style;

            if (supported) {
                window.scrollTo({ top: 100, behavior: 'smooth' });
                setTimeout(() => {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }, 500);
            } else {
                window.scrollTo(0, 100);
                setTimeout(() => {
                    window.scrollTo(0, 0);
                }, 500);
            }

            document.getElementById('scroll-result').innerHTML =
                supported ?
                    '<span class="pass">✅ Smooth scroll is supported</span>' :
                    '<span class="partial">⚠️ Smooth scroll not supported - using instant scroll</span>';
        }

        // Test Form Validation
        document.getElementById('test-form').addEventListener('submit', (e) => {
            e.preventDefault();
            document.getElementById('form-result').innerHTML =
                '<span class="pass">✅ Form validation is working correctly</span>';
        });

        // Export Results
        function exportResults() {
            const browser = detectBrowser();
            const results = {
                browser: browser,
                timestamp: new Date().toISOString(),
                cssTests: cssTests.map(test => ({
                    name: test.name,
                    result: test.test(),
                    critical: test.critical
                })),
                jsTests: jsTests.map(test => ({
                    name: test.name,
                    result: test.test(),
                    critical: test.critical
                }))
            };

            const blob = new Blob([JSON.stringify(results, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `browser-test-${browser.name}-${browser.version}.json`;
            a.click();
            URL.revokeObjectURL(url);

            log('Test results exported successfully', 'pass');
        }

        // Copy Summary to Clipboard
        function copyToClipboard() {
            const browser = detectBrowser();
            const cssPassed = cssTests.filter(t => t.test()).length;
            const jsPassed = jsTests.filter(t => t.test()).length;

            const summary = `Browser Test Summary - ${browser.name} ${browser.version}
Platform: ${browser.platform} ${browser.mobile ? '(Mobile)' : '(Desktop)'}
CSS Features: ${cssPassed}/${cssTests.length} passed
JavaScript Features: ${jsPassed}/${jsTests.length} passed
Critical Issues: ${cssTests.filter(t => t.critical && !t.test()).length + jsTests.filter(t => t.critical && !t.test()).length}
            `;

            navigator.clipboard.writeText(summary).then(() => {
                log('Summary copied to clipboard', 'pass');
            });
        }

        // Initialize Tests
        window.onload = () => {
            const browser = detectBrowser();
            document.getElementById('browser-info').innerHTML = `
                <strong>Browser:</strong> ${browser.name} ${browser.version}<br>
                <strong>Platform:</strong> ${browser.platform}<br>
                <strong>Mobile:</strong> ${browser.mobile ? 'Yes' : 'No'}<br>
                <strong>User Agent:</strong> ${browser.userAgent}
            `;

            log(`Testing on ${browser.name} ${browser.version}`, 'info');

            runCSSTests();
            runJSTests();
            testVisualFeatures();
        };
    </script>
</body>

</html>